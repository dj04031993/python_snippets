@ECHO OFF

REM Set Kafka installation location
SET kLocation=D:\kafka_2.11-1.0.0

REM Set topic name
SET kTopic=

REM Set broker list
SET brokerList=

REM Set SSL config file location
SET configLocation=D:\kafka_2.11-1.0.0\config\client_ssl.properties

REM Set output file to store consumed messages
SET outputFile=consumed_messages.txt

REM Change directory to Kafka location
cd %kLocation%

REM Run Kafka consumer and redirect output to file
call D:\kafka_2.11-1.0.0\bin\windows\kafka-console-consumer.bat ^
    --bootstrap-server %brokerList% ^
    --topic %kTopic% ^
    --consumer.config %configLocation% ^
    --from-beginning ^
    --timeout-ms 60000 > %outputFile%

pause
